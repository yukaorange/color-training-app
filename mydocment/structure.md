# 色彩トレーニングアプリ 更新版画面構成とレンダリング方法（ホームページ含む）

## 主要画面構成

1. ホームページ

   - URL: `/` (SSG)
   - 機能:
     - アプリの概要説明 (SSG)
     - エディターとアーカイブへのリンク (SSG)
     - ログイン/サインアップへの導線 (SSG)

2. エディターページ

   - URL: `/editor` (SSG + CSR)
   - 機能:
     - 3D グリッド操作 (CSR)
     - アーカイブへのリンク (SSG)
   - モーダル:
     - ログイン (CSR)
     - ユーザー情報 (CSR)
     - メタ情報入力/保存 (CSR)
     - カラーピッカー (CSR)

3. アーカイブページ
   - URL: `/archive` (SSG + CSR)
   - 機能:
     - プロジェクト一覧表示 (CSR with SWR)
     - エディターへのリンク (SSG)
   - モーダル:
     - ログイン (CSR)
     - ユーザー情報 (CSR)
     - 実績インポート確認 (CSR)

## レンダリング方法の詳細

### ホームページ

- 基本構造 (SSG)
- 静的コンテンツ（アプリ説明、特徴紹介） (SSG)
- エディターとアーカイブへのリンク (SSG)
- 認証状態に応じた表示（ログイン/ログアウト） (CSR)

### エディターページ

- 基本構造 (SSG)
- 3D グリッド操作 (CSR)
- ユーザー操作に応じたインタラクション (CSR)
- データフェッチ:
  - 初期状態 (SSG)
  - ユーザー固有のデータ (CSR, 必要に応じて SWR)

### アーカイブページ

- 基本構造 (SSG)
- プロジェクト一覧表示 (CSR with SWR)
- データフェッチ: プロジェクト一覧 (SWR)

## 実装アドバイス

1. **ルーティング**:

   - `pages/index.tsx`でホームページを実装 (SSG)
   - `pages/editor.tsx`と`pages/archive.tsx`で各機能ページを実装 (SSG + CSR)
   - Next.js の`Link`コンポーネントを使用してページ間リンクを実装 (SSG)

2. **共通レイアウト**:

   - `components/Layout.tsx`で共通レイアウトを実装 (SSG)
   - 各ページでこのレイアウトを使用 (SSG)

3. **状態管理**:

   - valtio を使用してグローバル状態を管理 (CSR)
   - ユーザー認証状態、現在の編集プロジェクトなどをグローバル状態で管理 (CSR)

4. **パフォーマンス最適化**:

   - 3D グリッドコンポーネントは動的インポートを使用 (CSR)

5. **SEO 対策**:

   - `next/head`を使用して適切なタイトルやメタデータを設定 (SSG)
   - ホームページでは特に重要なキーワードやデスクリプションを設定 (SSG)

6. **アクセシビリティ**:

   - セマンティックな HTML 構造を使用 (SSG)
   - キーボードナビゲーションのサポート (CSR)
   - ARIA 属性の適切な使用 (SSG + CSR)

7. **エラーハンドリング**:

   - グローバルエラーハンドリング機能を実装 (CSR)
   - ユーザーフレンドリーなエラーメッセージ表示 (CSR)

8. **レスポンシブデザイン**:

   - モバイルファーストアプローチで CSS を設計 (SSG)
   - メディアクエリを使用して異なる画面サイズに対応 (SSG)

9. **認証フロー**:

   - Firebase Authentication と Next.js を統合 (CSR)
   - 認証済みユーザーのみがアクセスできるページや機能を実装 (CSR)
   - ホームページで未認証ユーザーへの案内を表示 (CSR)

10. **テスト**:
    - Jest と React Testing Library でユニットテストとコンポーネントテストを実装
    - Cypress で E2E テストを実装

この構成により、ユーザーは直接主要機能にアクセスでき、スムーズなナビゲーションが可能になります。SSG と CSR を適切に組み合わせることで、高速な初期ロードと動的なユーザーエクスペリエンスの両立が可能です。

継続的な改善のため、ユーザーフィードバックを収集し、必要に応じて機能や UI を調整していくことをおすすめします。
